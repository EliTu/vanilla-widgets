var t,e,n;function a(t,{attributes:e,styles:n,text:a}){e&&function(t,e){if(!e||!Object.keys(e).length)return;const n=Object.entries(e);for(const[a,i]of n)"boolean"==typeof i&&i?t.setAttribute(a,""):t.setAttribute(a,i)}(t,e),n&&function(t,e){if(!e||!Object.keys(e).length)return void t.removeAttribute("style");const n=Object.entries(e);for(const[a,i]of n)a in t.style&&(t.style[a]=i)}(t,n),a&&function(t,e){const n=document.createTextNode(e);t.appendChild(n)}(t,a)}function i(t,e,...n){if(!function(t){return"[object HTMLUnknownElement]"!==document.createElement(t.toUpperCase()).toString()}(t))throw new Error(`Attempting to assign an invalid HTML element type: ${t}.`);const i=document.createElement(t);return Object.keys(e).length&&a(i,e),Array.isArray(n)&&function(t,e,n){for(let a=0;a<e.length;a++){const i=e[a];t.append(i),n&&a===e.length-1&&i.insertAdjacentText("afterend",n)}}(i,n,e.afterEndText),i}(e=t||(t={})).SPONSORED="sponsored",e.ORGANIC="organic",(n||(n={})).VIDEO="video";const[r,o,c,s,d,u,l,m,p]=["header","section","article","span","div","img","h2","a","p"].map((t=>(e,...n)=>i(t,e,...n)));function b(e){return o({attributes:{class:"widget-section-container","data-origin":e,"data-testid":"widget-section"}},function(e){const n=e===t.SPONSORED;return r({attributes:{class:"widget-header","data-origin":e,"data-testid":"widget-header-container"}},l({text:n?"Ad content for you":"More content on this site"}),p({text:n?"by ":""},s({text:n?"Taboola":""})))}(e),d({attributes:{class:"widget-content-container","data-testid":"widget-content-container"}}))}function g(e){const{origin:n}=e;switch(n){case t.SPONSORED:return function({url:t,name:e,thumbnail:n,branding:a,origin:i}){return c({attributes:{class:"item-container","data-testid":"item-article","data-recommendation-type":`${i}`}},m({attributes:{href:t,target:"_blank",rel:"noopener noreferrer",class:"link-container"}},d({attributes:{"data-testid":"image-container",class:"image-container"}},u({attributes:{class:"item-thumbnail-image",src:n[0].url,alt:e}})),d({attributes:{class:`${i}-text-content-container`,"data-testid":"text-content-container"}},p({attributes:{class:"item-text-content","data-testid":"item-text-content"},text:e}),p({attributes:{class:"item-branding-name","data-testid":"item-branding-name"},text:`by ${a}`}))))}(e);case t.ORGANIC:return function({url:t,name:e,thumbnail:n,origin:a}){return c({attributes:{class:"item-container organic-item-container","data-testid":"item-article","data-recommendation-type":`${a}`},styles:{backgroundImage:`url(${n[0].url})`}},m({attributes:{href:t,class:"link-container","data-testid":"link-container"}},d({attributes:{class:`${a}-text-content-container`,"data-testid":"text-content-container"}},p({attributes:{class:"item-text-content","data-testid":"item-text-content"},text:e}))))}(e);default:throw new Error(`Trying to generate an unknown origin type: ${n}`)}}const f=document.querySelector("#app"),y={apiKey:"f9040ab1b9c802857aa783c469d0e0ff7e7366e4",appType:"desktop",publisherId:"taboola-templates",sourceId:"214321562187"};f&&document.addEventListener("DOMContentLoaded",(async()=>{const t=function({apiKey:t,appType:e,publisherId:n,sourceId:a}){return`http://api.taboola.com/1.0/json/${n}/recommendations.get?app.type=${e}&app.apikey=${t}&count=4&source.type=video&source.id=${a}&source.url=http://www.site.com/videos/214321562187.html`}(y);try{const e=(await fetch(t)).json(),{list:n}=await e;for(const t of n){let e=document.querySelector(`[data-origin=${t.origin}]`);e||(e=b(t.origin),f.append(e));const n=e.querySelector(".widget-content-container"),a=g(t);a&&n.append(a)}}catch(e){console.error(e)}}));
